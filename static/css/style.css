@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

/* --- 0. COLOR VARIABLES --- */
:root {
    /* Light Mode Defaults */
    --bg-overlay: rgba(0, 51, 42, 0.4);
    --card-bg: rgba(255, 255, 255, 0.85);
    --card-border: rgba(255, 255, 255, 0.5);
    --text-main: #333;
    --text-muted-light: #6c757d;
    --input-bg: rgba(255, 255, 255, 0.9);
    --input-text: #000;
    --badge-bg: white;
    --glow-color: 0 15px 35px rgba(0,0,0,0.2); 
    --brand-green: #004d40;
    --brand-cyan: #64ffda;
}

/* --- 1. BASE STYLES --- */
body, html {
    height: 100%;
    margin: 0;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden; 
    overflow-y: auto; 
}

/* Base text color */
h5, h4, h3, h6 { 
    color: var(--text-main) !important; 
}
p, .small, label, span { 
    color: var(--text-main); 
}

/* --- 2. LAYOUT & CARDS --- */
.bg-image {
    background-image: url('/static/img/bg.jpg'); 
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    filter: blur(8px); 
    -webkit-filter: blur(8px);
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

.bg-overlay {
    background-color: var(--bg-overlay);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    transition: background-color 0.5s ease;
}

.glass-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    box-shadow: var(--glow-color);
    border-radius: 20px;
    z-index: 3; 
    position: relative;
    color: var(--text-main);
    animation: floatUp 0.8s ease-out forwards;
    overflow: visible !important; 
    transition: box-shadow 0.5s ease, background 0.5s ease;
}

/* Logo Badge Size and Positioning */
.logo-badge {
    width: 100px !important;
    height: 100px !important;
    background: var(--badge-bg);
    border-radius: 50%;
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    z-index: 10;
}

.logo-badge img {
    width: 90% !important; 
    height: 90% !important;
    object-fit: contain;
}

/* --- 3. INPUTS & FORMS --- */
.form-control, .form-select {
    background-color: var(--input-bg) !important;
    border: 1px solid var(--card-border);
    color: var(--input-text) !important;
    border-radius: 8px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

/* --- 4. BUTTONS & LINKS --- */
/* Base Link Color */
a { 
    color: var(--brand-green); 
    font-weight: 600; 
    text-decoration: none; 
    transition: color 0.3s ease;
}
a:hover { 
    text-decoration: underline; 
}

/* Primary Action Button (.btn-success) */
.btn-success {
    background-color: #ffffff !important;
    color: var(--brand-green) !important;
    border: 1px solid var(--brand-green);
    border-radius: 8px;
    padding: 10px;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.btn-success:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

/* Secondary Button (.btn-light / Quick Actions) */
.btn-light {
    background-color: #ffffff;
    border: 1px solid #dee2e6;
    color: var(--text-main);
}

/* --- 5. TABLE RESPONSIVE HELPER --- */
.table-responsive {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Animations */
@keyframes floatUp { 
    0% { opacity: 0; transform: translateY(20px); } 
    100% { opacity: 1; transform: translateY(0); } 
}

/* ---------- ONLY NEW CHANGE BELOW ---------- */
/* Force white text on the dark-green welcome banner (background #004d40) */
[style*="#004d40"] h1,
[style*="#004d40"] h2,
[style*="#004d40"] h3,
[style*="#004d40"] h4,
[style*="#004d40"] h5,
[style*="#004d40"] h6,
[style*="#004d40"] p {
    color: #ffffff !important;
}

/* =========================================================
   MOBILE RESPONSIVE FIX (LIGHT MODE ONLY)
   ========================================================= */

/* Mobile-first safety: prevent horizontal scroll on small screens */
* {
    box-sizing: border-box;
}
body, html {
    max-width: 100%;
}

/* MOBILE RESPONSIVE TUNING */
@media (max-width: 576px) {
    /* Keep flash messages container inside screen */
    .container.position-absolute.top-0.start-50.translate-middle-x.mt-5 {
        width: calc(100% - 24px) !important;
        max-width: 100% !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        margin-top: 12px !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    /* Glass card spacing */
    .glass-card {
        width: calc(100% - 24px) !important;
        margin: 0 auto !important;
        border-radius: 16px !important;
    }

    /* Logo badge smaller so it doesn't break layout */
    .logo-badge {
        width: 78px !important;
        height: 78px !important;
        top: -40px !important;
    }

    /* Inputs/buttons fit nicely */
    .form-control, .form-select {
        font-size: 16px !important; /* prevents iPhone zoom */
        padding: 12px 12px !important;
    }

    .btn, .btn-success, .btn-light {
        width: 100% !important;
        padding: 12px !important;
        font-size: 16px !important;
    }

    /* Reduce big headings a bit */
    h1 { font-size: 1.5rem !important; }
    h2 { font-size: 1.25rem !important; }
    h3 { font-size: 1.15rem !important; }

    /* Make tables scroll instead of breaking page */
    table {
        width: 100% !important;
    }
}

/* =========================================================
   DASHBOARD MOBILE LAYOUT FIX
   ========================================================= */
@media (max-width: 576px) {

    /* Navbar spacing + better collapse */
    .navbar.glass-card {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Make brand block not overflow */
    .navbar-brand img {
        width: 34px !important;
        height: 34px !important;
    }

    /* Reduce gaps in nav links on small screens */
    .navbar-nav.gap-3 {
        gap: 8px !important;
    }

    /* Welcome banner stack nicely */
    .glass-card.bg-success.text-white {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 10px !important;
    }

    /* Buttons in welcome banner wrap properly */
    .glass-card.bg-success.text-white .btn {
        width: 100% !important;
    }

    /* Reduce container padding on phone */
    .container-fluid.px-4 {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* News cards padding slightly smaller */
    .glass-card.p-4 {
        padding: 16px !important;
    }

    /* Quick actions: bigger tap area + tighter card padding */
    .btn.btn-light.w-100.p-3 {
        padding: 14px !important;
    }

    /* Make post images not too tall on phone */
    img.img-fluid.rounded.w-100 {
        max-height: 320px !important;
    }

    /* Modal viewer content fit */
    #viewContent {
        width: calc(100% - 16px) !important;
        height: calc(100% - 16px) !important;
    }
}

/* =========================================================
   STAFF DIRECTORY MOBILE LAYOUT FIX
   ========================================================= */
@media (max-width: 576px) {

    /* Page container padding */
    .container.mt-4.pb-5 {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Navbar spacing */
    .navbar.glass-card.mx-3 {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Search input better sizing */
    #dirSearch {
        font-size: 16px !important; /* prevents iPhone zoom */
        padding-top: 12px !important;
        padding-bottom: 12px !important;
    }

    /* Staff card spacing */
    .staff-card {
        padding: 14px !important;
        border-radius: 16px !important;
    }

    /* Force each row section to stack */
    .staff-card .row {
        flex-direction: column !important;
        gap: 10px !important;
    }

    /* Make all columns full width */
    .staff-card .col-md-4,
    .staff-card .col-md-3,
    .staff-card .col-md-2 {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* Remove right-align on mobile so it flows naturally */
    .staff-card .col-md-2.text-end {
        text-align: left !important;
    }

    /* Edit button full width and easy to tap */
    .staff-card .btn.btn-outline-primary.btn-sm {
        width: 100% !important;
        padding: 12px !important;
        font-size: 15px !important;
    }

    /* Prevent long email from breaking layout */
    .staff-card .small.text-muted {
        word-break: break-word !important;
        overflow-wrap: anywhere !important;
    }

    /* Badge sizing */
    .staff-card .badge {
        font-size: 0.75rem !important;
    }
}

/* =========================================================
   FORMS PAGE MOBILE LAYOUT FIX
   ========================================================= */
@media (max-width: 576px) {

    /* Navbar spacing */
    .navbar.glass-card.mx-3 {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Page container padding */
    .container.mt-4.pb-5 {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* The big forms wrapper is too padded on phone */
    .glass-card.p-5 {
        padding: 16px !important;
        border-radius: 16px !important;
    }

    /* Header row stack */
    .glass-card .row.align-items-center.mb-4 {
        gap: 12px !important;
    }

    /* Make search input phone-friendly */
    #formSearch {
        font-size: 16px !important; /* prevents iPhone zoom */
        padding-top: 12px !important;
        padding-bottom: 12px !important;
    }

    /* Form tiles: stack and keep spacing clean */
    #formsGrid .col-md-6 {
        width: 100% !important;
        max-width: 100% !important;
    }

    /* Each form item layout: prevent squeezing */
    .form-item > div {
        gap: 10px !important;
        flex-wrap: wrap !important;
    }

    /* Form title wrap instead of overflow */
    .form-title {
        word-break: break-word !important;
        overflow-wrap: anywhere !important;
    }

    /* Icon box a bit smaller */
    .form-item .rounded-3.me-3 {
        width: 44px !important;
        height: 44px !important;
        min-width: 44px !important;
    }

    /* Buttons: easier tapping on phone */
    .form-item .btn.btn-sm.rounded-circle {
        width: 42px !important;
        height: 42px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
}

/* =========================================================
   PROFILE PAGE MOBILE LAYOUT FIX
   ========================================================= */
@media (max-width: 576px) {

    /* Navbar spacing */
    .navbar.glass-card.mx-3 {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Container spacing */
    .container.mt-5 {
        margin-top: 18px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Profile card padding too large for phone */
    .glass-card.p-5 {
        padding: 16px !important;
        border-radius: 16px !important;
    }

    /* Avatar smaller on phone */
    .glass-card .rounded-circle[style*="width: 120px"],
    .glass-card .bg-success.rounded-circle[style*="width: 120px"] {
        width: 96px !important;
        height: 96px !important;
        font-size: 2.2rem !important;
    }

    /* Camera button fit */
    label[for="fileInput"] {
        width: 34px !important;
        height: 34px !important;
        padding: 0 !important;
    }

    /* Headings not too big */
    .glass-card h3 {
        font-size: 1.25rem !important;
        line-height: 1.2 !important;
    }

    /* Inputs prevent iPhone zoom */
    .form-control,
    .form-select {
        font-size: 16px !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
    }

    /* HR spacing */
    hr.my-4 {
        margin-top: 16px !important;
        margin-bottom: 16px !important;
    }

    /* Save button: bigger tap */
    .btn.btn-success.w-100.py-2 {
        padding-top: 12px !important;
        padding-bottom: 12px !important;
        font-size: 16px !important;
    }
}

/* =========================================================
   IT SUPPORT PAGE MOBILE LAYOUT FIX
   ========================================================= */
@media (max-width: 576px) {

    /* Navbar spacing so it fits phone */
    .navbar.glass-card.mx-3 {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
        border-radius: 12px !important;
    }

    /* Prevent brand area from causing overflow */
    .navbar .navbar-brand img {
        width: 34px !important;
        height: 34px !important;
    }
    .navbar .navbar-brand .small {
        font-size: 0.75rem !important;
    }

    /* Main container */
    .container.mt-4.pb-5 {
        margin-top: 14px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Card padding smaller */
    .glass-card.p-4 {
        padding: 16px !important;
        border-radius: 16px !important;
    }

    /* Title sizes */
    .glass-card h3 {
        font-size: 1.25rem !important;
        line-height: 1.2 !important;
    }

    /* Nav pills: stack nicely on phone */
    #itTabs.nav.nav-pills.nav-justified {
        gap: 10px !important;
    }
    #itTabs .nav-link {
        width: 100% !important;
        font-size: 0.95rem !important;
        padding: 12px 12px !important;
        border-radius: 12px !important;
    }

    /* Forms spacing */
    .row.g-3 {
        --bs-gutter-x: 0.75rem !important;
        --bs-gutter-y: 0.75rem !important;
    }

    /* Inputs: prevent iPhone zoom + improve tapping */
    .form-control,
    .form-select,
    textarea {
        font-size: 16px !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
    }

    /* Buttons full-width already, just make consistent */
    .btn.w-100.py-2 {
        padding-top: 12px !important;
        padding-bottom: 12px !important;
        font-size: 16px !important;
        border-radius: 12px !important;
    }

    /* Dynamic boxes: avoid too wide / cramped */
    #roleChangeField,
    #deptChangeField,
    #transferField {
        padding: 12px !important;
        border-radius: 12px !important;
    }

    /* Modals: keep inside screen */
    .modal-dialog {
        margin: 12px !important;
    }
    .modal-content.p-4 {
        padding: 16px !important;
        border-radius: 16px !important;
    }
    .modal-body h3 {
        font-size: 1.25rem !important;
    }
}

/* =========================================================
   IT NOTIFICATIONS (ADMIN PANEL) - MOBILE TABLE → CARD VIEW
   ========================================================= */

/* Make sure responsive wrapper scrolls when needed */
.table-responsive {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Mobile conversion */
@media (max-width: 576px) {

    /* Navbar spacing */
    .navbar.glass-card.mx-3 {
        margin-left: 10px !important;
        margin-right: 10px !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
        border-radius: 12px !important;
    }

    /* Page container */
    .container.mt-4.pb-5 {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Card padding smaller */
    .glass-card.p-4 {
        padding: 16px !important;
        border-radius: 16px !important;
    }

    /* Header section wraps nicely */
    .glass-card .d-flex.justify-content-between.align-items-center {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 10px !important;
    }
    .glass-card .d-flex.justify-content-between.align-items-center .btn {
        width: 100% !important;
    }

    /* TABLE → CARD VIEW */
    .table {
        width: 100% !important;
    }

    /* Hide the table header on phone */
    .table thead {
        display: none !important;
    }

    /* Each row becomes a card */
    .table tbody tr {
        display: block !important;
        border: 1px solid rgba(0,0,0,0.08) !important;
        border-radius: 14px !important;
        padding: 12px !important;
        margin-bottom: 12px !important;
        background: rgba(255, 255, 255, 0.85) !important;
        box-shadow: 0 8px 18px rgba(0,0,0,0.08) !important;
    }

    /* Each cell becomes a line item */
    .table tbody td {
        display: flex !important;
        justify-content: space-between !important;
        align-items: flex-start !important;
        gap: 12px !important;
        padding: 8px 0 !important;
        border: 0 !important;
        white-space: normal !important;
    }

    /* Add labels automatically using nth-child (Incidents + Amendments share 6 cols) */
    /* Column 1 */
    .table tbody td:nth-child(1)::before {
        content: "Date";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }
    /* Column 2 */
    .table tbody td:nth-child(2)::before {
        content: "Agency / Username";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }
    /* Column 3 */
    .table tbody td:nth-child(3)::before {
        content: "Reporter / Type";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }
    /* Column 4 */
    .table tbody td:nth-child(4)::before {
        content: "Issue / Phone";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }
    /* Column 5 */
    .table tbody td:nth-child(5)::before {
        content: "Description / Details";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }
    /* Column 6 */
    .table tbody td:nth-child(6)::before {
        content: "Action";
        font-weight: 700;
        opacity: 0.75;
        min-width: 90px;
    }

    /* Make badges + action button align nicely */
    .table tbody td:last-child {
        justify-content: flex-end !important;
    }
    .table tbody td:last-child::before {
        margin-right: auto;
    }
    .table tbody td .btn {
        width: auto !important;
        white-space: nowrap !important;
    }

    /* Prevent super long descriptions from breaking layout */
    .table tbody td:nth-child(5) {
        align-items: flex-start !important;
    }
}

/* =========================================================
   FORGOT PASSWORD - MOBILE FIX (NO HTML CHANGES)
   ========================================================= */
@media (max-width: 576px) {

    /* Make the page breathe on mobile */
    .container.d-flex.justify-content-center.align-items-center.vh-100 {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Override fixed 380px card width */
    .container.d-flex.justify-content-center.align-items-center.vh-100 .card.glass-card {
        width: 100% !important;
        max-width: 420px !important;
        margin-top: 0 !important;
        border-radius: 16px !important;
    }

    /* Logo badge smaller so it doesn't push content */
    .container.d-flex.justify-content-center.align-items-center.vh-100 .logo-badge {
        width: 78px !important;
        height: 78px !important;
        top: -40px !important;
    }

    /* Prevent iPhone zoom + improve touch */
    .container.d-flex.justify-content-center.align-items-center.vh-100 .form-control {
        font-size: 16px !important;
        padding: 12px 12px !important;
    }

    .container.d-flex.justify-content-center.align-items-center.vh-100 .btn {
        padding: 12px !important;
        font-size: 16px !important;
    }
}

/* =========================================================
   LOGIN - MOBILE FIX (NO HTML CHANGES)
   ========================================================= */
@media (max-width: 576px) {

    /* Reduce unnecessary top space on phones */
    .container.d-flex.justify-content-center.align-items-center.min-vh-100 .card.glass-card.mt-5 {
        margin-top: 0 !important;
    }

    /* Slightly tighter card corners on mobile */
    .container.d-flex.justify-content-center.align-items-center.min-vh-100 .card.glass-card {
        border-radius: 16px !important;
    }

    /* Logo badge smaller so it doesn't distort spacing */
    .container.d-flex.justify-content-center.align-items-center.min-vh-100 .logo-badge {
        width: 78px !important;
        height: 78px !important;
        top: -40px !important;
    }

    /* Prevent iPhone zoom + better touch */
    .container.d-flex.justify-content-center.align-items-center.min-vh-100 .form-control {
        font-size: 16px !important;
        padding: 12px 12px !important;
    }

    .container.d-flex.justify-content-center.align-items-center.min-vh-100 .btn {
        padding: 12px !important;
        font-size: 16px !important;
    }
}
